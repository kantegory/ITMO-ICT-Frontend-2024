<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Рецепты</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="css/main.css">
  </head>
  <body>
    <nav class="navbar navbar-expand-lg bg-body-tertiary">
        <div class="container-fluid">
            <a class="navbar-brand" href="#" style="font-weight: bold; color: darkgreen;">YUMMY</a>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav me-auto mb-2 mb-lg-0">
              <li class="nav-item">
                <a class="nav-link" id="personal-cabinet-link" href="index.html">Личный кабинет</a>
              </li>
              <li class="nav-item">
                <a class="nav-link active" id="recipes-menu" href="recipes.html">Рецепты</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" id="list-of-chefs" href="chefs.html">Кулинары</a>
              </li>
            </ul>
          </div>
        </div>
    </nav>

    <!-- Список рецептов -->
    <div class="container mt-5" id="recipes-content">
        <h2>Список рецептов</h2>
        <div class="row">
          <!-- Поисковая форма -->
          <form class="search-grid" id="recipe-search-form" role="search">
            <input class="form-control me-2" id="search-input" type="search" placeholder="Поиск рецепта" aria-label="Search">
            <button class="btn btn-outline-success" type="submit">Поиск</button>
          </form>
          <div class="d-flex flex-start mb-4">
            
            <!-- Выпадающий список для фильтра сложности -->
            <div class="select-wrapper me-2">
              <select id="complexity-select" class="form-select">
                <option value="all" disabled selected>Выберите сложность блюда</option>
                <option value="all">Все рецепты</option>
                <option value="simple">Простой рецепт</option>
                <option value="medium">Средняя сложность</option>
                <option value="hard">Сложный рецепт</option>
              </select>
            </div>
        
            <!-- Выпадающий список для фильтра по типу блюда -->
            <div class="select-wrapper">
              <select id="type-select" class="form-select">
                <option value="all" disabled selected>Выберите тип блюда</option>
                <option value="all">Все рецепты</option>
                <option value="vegeterian">Вегетарианские</option>
                <option value="bakery">Выпечка</option>
                <option value="main">Горячее</option>
                <option value="snacks">Закуски</option>
                <option value="breakfast">Завтраки</option>
              </select>
            </div>
          </div>
        </div>

        <div class="select-wrapper">
            <h5>Выберите ингредиенты:</h5>
            <button id="toggle-ingredients-btn" class="btn btn-secondary mb-2">Показать ингредиенты</button>
            <div id="ingredients-wrapper" style="display: none;">
                <label><input type="checkbox" value="beef"> Говядина</label><br>
                <label><input type="checkbox" value="cinnamon"> Корица</label><br>
                <label><input type="checkbox" value="chicken"> Курица</label><br>
                <label><input type="checkbox" value="lettuce"> Листья салата</label><br>
                <label><input type="checkbox" value="macaroni"> Макароны</label><br>
                <label><input type="checkbox" value="milk"> Молоко</label><br>
                <label><input type="checkbox" value="flour"> Мука</label><br>
                <label><input type="checkbox" value="cucumber"> Огурцы</label><br>
                <label><input type="checkbox" value="olive_oil"> Оливковое масло</label><br>
                <label><input type="checkbox" value="tomato"> Помидоры</label><br>
                <label><input type="checkbox" value="sugar"> Сахар</label><br>
                <label><input type="checkbox" value="cream"> Сливки</label><br>
                <label><input type="checkbox" value="salt"> Соль</label><br>
                <label><input type="checkbox" value="tomato_paste"> Томатная паста</label><br>
                <label><input type="checkbox" value="eggs"> Яйца</label><br>
            </div>
            
        </div>               

        <div class="row">
            <div class="col-md-4 recipe" data-complexity="simple" data-type="bakery" data-ingredients="milk,flour,eggs,cinnamon,sugar">
                <div class="card">
                    <img src="img/sinnabon.jpeg" class="card-img-top" alt="Рецепт 1">
                    <div class="card-body">
                        <h5 class="card-title">
                            <span class="d-inline-block bg-success rounded-circle p-1"></span>
                            Синнабоны
                        </h5>
                        <p class="card-text">Описание рецепта синнабонов.</p>
                        <p class="card-text"><strong>Кулинар:</strong> <a href="chef.html?img=img/maria.jpeg&title=Мария Иванова&description=Синнабоны" id="chef-link">Мария Иванова</a></p>
                        <a href="recipe.html?img=img/sinnabon.jpeg&title=Синнабоны&description=Описание рецепта синнабонов" class="btn btn-recipe">Посмотреть рецепт</a>
                    </div>
                </div>
            </div>
        
            <div class="col-md-4 recipe" data-complexity="medium" data-type="main" data-ingredients="chicken,macaroni,olive_oil,tomato,tomato_paste,salt">
                <div class="card">
                    <img src="img/main.jpeg" class="card-img-top" alt="Рецепт 2">
                    <div class="card-body">
                        <h5 class="card-title">
                            <span class="d-inline-block bg-warning rounded-circle p-1"></span>
                            Томатная паста с индейкой
                        </h5>
                        <p class="card-text">Описание рецепта томатной пасты с индейкой.</p>
                        <p class="card-text"><strong>Кулинар:</strong> <a href="chef.html?img=img/maria.jpeg&title=Мария Иванова&description=Синнабоны" id="chef-link">Мария Иванова</a></p>
                        <a href="recipe.html?img=img/main.jpeg&title=Томатная паста с индейкой&description=Описание рецепта томатной пасты с индейкой" class="btn btn-recipe">Посмотреть рецепт</a>
                    </div>
                </div>
            </div>
        
            <div class="col-md-4 recipe" data-complexity="hard" data-type="vegeterian" data-ingredients="lettuce,cucumber,tomato_paste,olive_oil,salt">
                <div class="card">
                    <img src="img/salad.jpeg" class="card-img-top" alt="Салат">
                    <div class="card-body">
                        <h5 class="card-title">
                            <span class="d-inline-block bg-danger rounded-circle p-1"></span>
                            Салат
                        </h5>
                        <p class="card-text">Описание рецепта салата.</p>
                        <p class="card-text"><strong>Кулинар:</strong> <a href="chef.html?img=img/maria.jpeg&title=Мария Иванова&description=Синнабоны" id="chef-link">Мария Иванова</a></p>
                        <a href="recipe.html?img=img/salad.jpeg&title=Салат&description=Описание рецепта салата" class="btn btn-recipe">Посмотреть рецепт</a>
                    </div>
                </div>
            </div>
        </div>
        
    </div>        

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const complexitySelect = document.getElementById('complexity-select');
            const typeSelect = document.getElementById('type-select');
            const ingredientCheckboxes = document.querySelectorAll('#ingredients-wrapper input[type="checkbox"]');
            const recipeCards = document.querySelectorAll('.recipe');
            const toggleBtn = document.getElementById('toggle-ingredients-btn');
            const ingredientsWrapper = document.getElementById('ingredients-wrapper');

            // Функция для получения выбранных ингредиентов
            function getSelectedIngredients() {
                let selectedIngredients = [];
                ingredientCheckboxes.forEach(checkbox => {
                    if (checkbox.checked) {
                        selectedIngredients.push(checkbox.value);
                    }
                });
                return selectedIngredients;
            }

            // Фильтрация рецептов
            function filterRecipes() {
                const selectedComplexity = complexitySelect.value;
                const selectedType = typeSelect.value;
                const selectedIngredients = getSelectedIngredients();

                recipeCards.forEach(recipe => {
                    const recipeComplexity = recipe.getAttribute('data-complexity');
                    const recipeType = recipe.getAttribute('data-type');
                    const recipeIngredients = recipe.getAttribute('data-ingredients').split(',');

                    const matchesComplexity = selectedComplexity === 'all' || recipeComplexity === selectedComplexity;
                    const matchesType = selectedType === 'all' || recipeType === selectedType;
                    const matchesIngredients = selectedIngredients.length === 0 || selectedIngredients.every(ingredient => recipeIngredients.includes(ingredient));

                    if (matchesComplexity && matchesType && matchesIngredients) {
                        recipe.style.display = 'block';
                    } else {
                        recipe.style.display = 'none';
                    }
                });
            }

            // Обработка кнопки "Показать ингредиенты" 
            toggleBtn.addEventListener('click', function() {
                if (ingredientsWrapper.style.display === 'none') {
                    ingredientsWrapper.style.display = 'block';
                    toggleBtn.textContent = 'Скрыть ингредиенты';
                } else {
                    ingredientsWrapper.style.display = 'none';
                    toggleBtn.textContent = 'Показать ингредиенты';
                }
            });

            complexitySelect.addEventListener('change', filterRecipes);
            typeSelect.addEventListener('change', filterRecipes);
            ingredientCheckboxes.forEach(checkbox => checkbox.addEventListener('change', filterRecipes));
            filterRecipes();
        });


        document.addEventListener("DOMContentLoaded", function() {
        const searchForm = document.getElementById('recipe-search-form');
        const searchInput = document.getElementById('search-input');
        const recipes = document.querySelectorAll('.recipe');

        // Обработка формы поиска
        searchForm.addEventListener('submit', function(e) {
            e.preventDefault();

            const searchQuery = searchInput.value.toLowerCase();

            recipes.forEach(recipe => {
                const recipeTitle = recipe.querySelector('.card-title').textContent.toLowerCase();

                if (recipeTitle.includes(searchQuery)) {
                    recipe.style.display = 'block';
                } else {
                    recipe.style.display = 'none';
                }
            });
          });
        });

    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
